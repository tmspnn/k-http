"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var kUtil=require("k-util"),kXhr=_interopDefault(require("k-xhr")),http={get:function(t,e){return this.receive(t,"get",e)},post:function(t,e,i){return this.send(t,"post",e,i)},put:function(t,e,i){return this.send(t,"put",e,i)},del:function(t,e){return this.receive(t,"delete",e)},receive:function(t,e,i){return kXhr(kUtil.assign({url:t,method:e},i)).then(function(t){return kUtil.isJSON(t)?JSON.parse(t):t}).catch(function(t){kUtil.isJSON(t)&&(this.error=JSON.parse(t))})},send:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i&&(n.data=i,kUtil.isObject(i)&&i.constructor===Object&&kUtil.assign(n,{contentType:"application/json",data:JSON.stringify(i)})),this.receive(t,e,n)}};module.exports=http;
